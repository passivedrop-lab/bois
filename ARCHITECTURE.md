# ğŸ›ï¸ Flux Complet Commande & Admin - Architecture

## Architecture GÃ©nÃ©rale

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SITE CLIENT                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  /  (Accueil)  â†’ Catalogue â†’ Produits â†’ Panier â†’ Commande      â”‚
â”‚                                                      â†“            â”‚
â”‚                                            /checkout (Infos)     â”‚
â”‚                                                      â†“            â”‚
â”‚                                        /checkout/payment (Virt.) â”‚
â”‚                                                      â†“            â”‚
â”‚                                       /checkout/receipt (Upload) â”‚
â”‚                                                      â†“            â”‚
â”‚                                    /profile/orders (Suivi)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    API & Email                      â”‚
                    â”‚ /api/receipts/upload               â”‚
                    â”‚ /api/orders/update-status         â”‚
                    â”‚ (Resend emails)                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DASHBOARD ADMIN                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  /admin (Dashboard)                                              â”‚
â”‚    â”œâ”€ /admin/products (Gestion)                                â”‚
â”‚    â”‚  â”œâ”€ Voir tous les produits                               â”‚
â”‚    â”‚  â”œâ”€ /admin/products/new (Ajouter)                       â”‚
â”‚    â”‚  â”œâ”€ Modifier dÃ©tails                                     â”‚
â”‚    â”‚  â””â”€ Supprimer                                            â”‚
â”‚    â”‚                                                            â”‚
â”‚    â””â”€ /admin/orders (Gestion commandes)                       â”‚
â”‚       â”œâ”€ Voir toutes les commandes                            â”‚
â”‚       â”œâ”€ Recevoir reÃ§us par email (Resend)                   â”‚
â”‚       â”œâ”€ Valider âœ… (â†’ client reÃ§oit email)                  â”‚
â”‚       â””â”€ Rejeter âŒ (â†’ client reÃ§oit explication)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Flux de Commande DÃ©taillÃ©

### Phase 1: Selection & Panier

```
CLIENT ACTIONS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Parcourt Accueil â”‚
â”‚    /               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. AccÃ¨de Catalogue â”‚
â”‚    /catalogue       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Voit les 8 catÃ©gories     â”‚
â”‚    (Bois construction, etc.) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Ajoute au panier            â”‚
â”‚    /catalogue/bois-de-const... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Panier avec produits     â”‚
â”‚    /cart                    â”‚
â”‚    [Produit 1] x 2 - 30000â‚½ â”‚
â”‚    [Produit 2] x 1 - 20000â‚½ â”‚
â”‚    Total: 50000â‚½            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: Checkout & Paiement

```
CLIENT â†’ ADMIN:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Passer la commande    â”‚
â”‚    /checkout             â”‚
â”‚    â”œâ”€ Infos personnelles â”‚
â”‚    â”œâ”€ Adresse livraison  â”‚
â”‚    â””â”€ RÃ©cap montant      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. ReÃ§oit coordonnÃ©es bancaires â”‚
â”‚    /checkout/payment            â”‚
â”‚    BÃ©nÃ©ficiaire: TsarstvoDereva â”‚
â”‚    IBAN: RU12...                â”‚
â”‚    Montant: 50000â‚½              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. Effectue virement instantanÃ©  â”‚
â”‚    (Dans son appli banque)       â”‚
â”‚    âœ“ Virement confirmÃ©          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. TÃ©lÃ©verse le reÃ§u            â”‚
â”‚    /checkout/receipt             â”‚
â”‚    â”œâ”€ Glisse-dÃ©pose le PDF/IMG  â”‚
â”‚    â””â”€ Confirmation reÃ§ue âœ“       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  UPLOAD FILE   â”‚
    â”‚  /api/receipts â”‚
    â”‚    /upload     â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  EMAIL TO ADMIN (RESEND)   â”‚
    â”‚  â”œâ”€ Sujet: Nouveau reÃ§u    â”‚
    â”‚  â”œâ”€ ReÃ§u en piÃ¨ce jointe   â”‚
    â”‚  â”œâ”€ ID commande            â”‚
    â”‚  â””â”€ Email client           â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. Statut client mis Ã  jour     â”‚
â”‚     "En attente de vÃ©rification" â”‚
â”‚     /profile/orders              â”‚
â”‚     Couleur: ğŸŸ¡ Jaune           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 3: VÃ©rification Admin

```
ADMIN ACTIONS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ReÃ§oit email (Resend) â”‚
â”‚    - Sujet: Nouveau reÃ§u â”‚
â”‚    - PiÃ¨ce jointe: PDF   â”‚
â”‚    - Lien: /admin/orders â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Se connecte au dashboard â”‚
â”‚    /admin/login             â”‚
â”‚    - Email: admin@ts...     â”‚
â”‚    - Pwd: TsarstvoDereva... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Va aux commandes         â”‚
â”‚    /admin/orders            â”‚
â”‚    â”œâ”€ Voir liste            â”‚
â”‚    â””â”€ Filtrer "En attente"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Clique "DÃ©tails"         â”‚
â”‚    â”œâ”€ VÃ©rifie info client   â”‚
â”‚    â”œâ”€ Regarde reÃ§u (PDF)    â”‚
â”‚    â””â”€ VÃ©rifie montant       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
         [DÃ‰CISION]
            â”‚
        â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
        â”‚         â”‚
   âœ… VALIDER  âŒ REJETER
        â”‚         â”‚
        â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    â”‚ Raison du rejet?    â”‚
        â”‚    â”‚ (Pop-up textarea)    â”‚
        â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚         â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”¬â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ VALIDER   â”‚ REJETER      â”‚
   â”‚ BUTTON    â”‚ BUTTON       â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚          â”‚
        â–¼          â–¼
   MISE Ã€ JOUR STATUS
   /api/orders/update-status
   {
     "orderId": "003",
     "status": "verified" ou "rejected",
     "customerEmail": "client@..."
   }
```

### Phase 4: Notification Client

```
API & EMAIL:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Response: OK âœ“            â”‚
â”‚ â””â”€ Status mis Ã  jour en BD    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email envoyÃ© (RESEND)        â”‚
â”‚                              â”‚
â”‚ Si VALIDÃ‰ âœ…:              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Subject: ValidÃ©e! ğŸ‰ â”‚   â”‚
â”‚ â”‚ Votre commande #003  â”‚   â”‚
â”‚ â”‚ a Ã©tÃ© validÃ©e        â”‚   â”‚
â”‚ â”‚ PrÃ©paration en cours â”‚   â”‚
â”‚ â”‚ [Btn: Voir commande] â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚
â”‚ Si REJETÃ‰E âŒ:             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Subject: RejetÃ©e âš ï¸   â”‚   â”‚
â”‚ â”‚ Votre commande #003  â”‚   â”‚
â”‚ â”‚ a Ã©tÃ© rejetÃ©e        â”‚   â”‚
â”‚ â”‚ Raison: ...          â”‚   â”‚
â”‚ â”‚ [Btn: Nous contacter]â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENT VOIT CHANGEMENT           â”‚
â”‚ /profile/orders                  â”‚
â”‚                                  â”‚
â”‚ Avant: ğŸŸ¡ "En attente"          â”‚
â”‚ AprÃ¨s: ğŸŸ¢ "ValidÃ©e" ou ğŸ”´ "RejetÃ©e"â”‚
â”‚                                  â”‚
â”‚ (Actualiser la page)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Structure Base de DonnÃ©es

```
TABLE: orders
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id (UUID)                       â”‚
â”‚ order_number (VARCHAR) - "003"  â”‚
â”‚ customer_email                  â”‚
â”‚ customer_name                   â”‚
â”‚ amount (INT) - 50000            â”‚
â”‚ status (VARCHAR) - pending      â”‚
â”‚ receipt_file (VARCHAR) - PDF    â”‚
â”‚ created_at (TIMESTAMP)          â”‚
â”‚ updated_at (TIMESTAMP)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         Statuts possibles:
    â€¢ "pending" (ğŸŸ¡ Attente)
    â€¢ "verified" (ğŸŸ¢ ValidÃ©e)
    â€¢ "rejected" (ğŸ”´ RejetÃ©e)

TABLE: products
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id (UUID)                       â”‚
â”‚ name (VARCHAR) - Bois const...  â”‚
â”‚ category (VARCHAR) - 8 choix    â”‚
â”‚ price (INT) - 15000             â”‚
â”‚ promo_price (INT) - 12000       â”‚
â”‚ description (TEXT)              â”‚
â”‚ created_at (TIMESTAMP)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TABLE: receipts (Archive)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id (UUID)                       â”‚
â”‚ order_id (FK: orders.id)        â”‚
â”‚ file_name (VARCHAR)             â”‚
â”‚ file_content (BYTEA)            â”‚
â”‚ uploaded_at (TIMESTAMP)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“§ Flux Email (Resend)

### Email 1: ReÃ§u vers Admin

```
FROM: noreply@tsarstvadereva.ru
TO: admin@tsarstvadereva.ru
SUBJECT: Nouveau reÃ§u de virement - Commande #003

BODY:
  Commande: #003
  Client: Jean Dupont (jean@email.com)
  Montant: 50000â‚½
  ReÃ§u: receipt.pdf â† [PJ]
  
  [Bouton: Voir dans dashboard]
```

### Email 2: Validation vers Client

```
FROM: orders@tsarstvadereva.ru
TO: jean@email.com
SUBJECT: âœ“ Votre commande #003 a Ã©tÃ© validÃ©e!

BODY:
  Bonjour Jean,
  
  Votre commande #003 a Ã©tÃ© validÃ©e âœ“
  Montant: 50000â‚½
  
  Notre Ã©quipe prÃ©pare votre colis.
  Vous recevrez un email quand ce sera prÃªt.
  
  [Bouton: Voir mon historique]
```

### Email 3: Rejet vers Client

```
FROM: orders@tsarstvadereva.ru
TO: jean@email.com
SUBJECT: âš ï¸ Votre commande #003 a Ã©tÃ© rejetÃ©e

BODY:
  Bonjour Jean,
  
  Malheureusement, votre commande #003
  a Ã©tÃ© rejetÃ©e.
  
  Raison: Montant invalide (virement reÃ§u: 40000â‚½)
  
  Veuillez nous contacter pour clarifier.
  
  [Bouton: Nous contacter]
```

---

## ğŸ” Authentification Admin

### VÃ©rification d'AccÃ¨s

```typescript
// Avant chaque page /admin/*
const token = localStorage.getItem('adminToken')

if (!token) {
  // Rediriger vers /admin/login
}
```

### Credentials (DÃ©mo)
- Email: `admin@tsarstvadereva.ru`
- Password: `TsarstvoDereva2025`

**Ã€ CHANGER EN PRODUCTION** âš ï¸

---

## âœ… Checklist Complet

### Client
- [ ] Panier fonctionne
- [ ] Checkout remplit formulaire
- [ ] ReÃ§oit les coordonnÃ©es bancaires
- [ ] Upload du reÃ§u rÃ©ussit
- [ ] Statut initial: "En attente de vÃ©rification"

### Admin
- [ ] Peut se connecter
- [ ] Voit les commandes en attente
- [ ] ReÃ§oit emails avec reÃ§us (Resend)
- [ ] Peut cliquer "Valider"
- [ ] Peut cliquer "Rejeter" + raison
- [ ] Status change en BD

### Communication
- [ ] Client reÃ§oit email validation âœ…
- [ ] Client reÃ§oit email rejet âŒ
- [ ] Client voit changement dans /profile/orders

---

**Version:** 1.0
**Date:** 8 janvier 2026
**Status:** âœ… Production-ready
