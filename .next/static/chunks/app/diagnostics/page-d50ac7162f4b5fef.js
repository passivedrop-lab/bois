(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{2200:function(e,s,l){Promise.resolve().then(l.bind(l,5922))},5922:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return n}});var r=l(7437),t=l(2265);function n(){let[e,s]=(0,t.useState)({loading:!0,tables:[],bucket:null,testProduct:null,error:null});(0,t.useEffect)(()=>{l()},[]);let l=async()=>{try{var e;s(e=>({...e,loading:!0})),console.log("[TEST 1] V\xe9rification des tables...");let l=await fetch("/api/admin/products"),r=await l.json();if(!l.ok)throw Error("Tables inaccessible: ".concat(r.error));console.log("[SUCCESS] Tables accessibles, produits:",(null===(e=r.products)||void 0===e?void 0:e.length)||0),s(e=>({...e,loading:!1,tables:r.products||[]}))}catch(l){let e=l instanceof Error?l.message:String(l);console.error("[DIAGNOSTIC ERROR]",e),s(s=>({...s,loading:!1,error:e}))}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"\uD83D\uDD27 Diagnostic Supabase"}),e.error&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-300 rounded-lg p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-red-800",children:"❌ Erreur Trouv\xe9e"}),(0,r.jsx)("p",{className:"text-red-700 mt-2 font-mono",children:e.error}),(0,r.jsxs)("div",{className:"mt-4 p-4 bg-red-100 rounded text-sm text-red-900",children:[(0,r.jsx)("strong",{children:"Solution:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[(0,r.jsxs)("li",{children:["Allez dans ",(0,r.jsx)("a",{href:"https://app.supabase.com",className:"underline",children:"Supabase Console"})]}),(0,r.jsx)("li",{children:"S\xe9lectionnez votre projet"}),(0,r.jsxs)("li",{children:["Allez dans ",(0,r.jsx)("strong",{children:"SQL Editor"})]}),(0,r.jsxs)("li",{children:["Copiez le contenu de ",(0,r.jsx)("code",{className:"bg-red-200 px-1",children:"supabase-schema.sql"})]}),(0,r.jsxs)("li",{children:["Collez dans l'\xe9diteur SQL et cliquez ",(0,r.jsx)("strong",{children:"Run"})]}),(0,r.jsxs)("li",{children:["Cr\xe9ez le bucket ",(0,r.jsx)("code",{className:"bg-red-200 px-1",children:"product-images"})," en tant que Private"]}),(0,r.jsx)("li",{children:"Revenez ici et rafra\xeechissez"})]})]})]}),!e.error&&(0,r.jsxs)("div",{className:"bg-green-50 border border-green-300 rounded-lg p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-green-800",children:"✅ Configuration OK"}),(0,r.jsx)("p",{className:"text-green-700 mt-2",children:"Supabase est connect\xe9 et les tables sont accessibles."}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("p",{className:"font-semibold",children:["\uD83D\uDCCA Produits actuels: ",(0,r.jsx)("span",{className:"text-xl",children:e.tables.length})]}),e.tables.length>0&&(0,r.jsx)("ul",{className:"mt-3 space-y-2",children:e.tables.map(e=>(0,r.jsxs)("li",{className:"text-sm p-2 bg-green-100 rounded",children:[(0,r.jsx)("strong",{children:e.name})," - ",e.category," - $",e.price]},e.id))})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-4",children:"\uD83D\uDCCB \xc9tapes de Configuration"}),(0,r.jsxs)("ol",{className:"space-y-3",children:[(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold mr-4",children:"1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Cr\xe9er les tables Supabase"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Ex\xe9cutez le sch\xe9ma SQL dans Supabase Console"})]})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold mr-4",children:"2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Cr\xe9er le bucket de stockage"}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm",children:["Nommez-le ",(0,r.jsx)("code",{className:"bg-gray-200 px-1",children:"product-images"})," et d\xe9finissez-le comme Private"]})]})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold mr-4",children:"3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Tester la cr\xe9ation"}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm",children:["Allez \xe0 ",(0,r.jsx)("code",{className:"bg-gray-200 px-1",children:"/admin/products/new"})," et cr\xe9ez un produit"]})]})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 flex gap-4",children:[(0,r.jsx)("button",{onClick:l,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold transition",children:"\uD83D\uDD04 Actualiser le diagnostic"}),(0,r.jsx)("a",{href:"/admin/products/new",className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-semibold transition",children:"➕ Cr\xe9er un produit"})]})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=2200)}),_N_E=e.O()}]);