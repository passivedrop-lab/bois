"use strict";(()=>{var e={};e.id=387,e.ids=[387],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5665:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>c,staticGenerationAsyncStorage:()=>l});var a={};t.r(a),t.d(a,{POST:()=>i});var o=t(9303),s=t(8716),n=t(3131),u=t(7070);async function i(e){try{let r=await e.formData(),t=r.get("orderId"),a=r.get("file"),o=r.get("customerEmail");if(!t||!a)return u.NextResponse.json({error:"Param\xe8tres manquants"},{status:400});let s=await a.arrayBuffer();return Buffer.from(s).toString("base64"),console.log("Email envoy\xe9 \xe0 admin@tsarstvadereva.ru"),console.log("Re\xe7u de commande #"+t),console.log("Fichier:",a.name),JSON.parse("[]").push({id:t,fileName:a.name,uploadedAt:new Date().toISOString(),customerEmail:o}),u.NextResponse.json({success:!0,message:"Re\xe7u envoy\xe9 \xe0 l'admin avec succ\xe8s",orderId:t},{status:200})}catch(e){return console.error("Erreur:",e),u.NextResponse.json({error:"Erreur lors de l'envoi du re\xe7u"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/receipts/upload/route",pathname:"/api/receipts/upload",filename:"route",bundlePath:"app/api/receipts/upload/route"},resolvedPagePath:"/home/deo/Desktop/bois/app/api/receipts/upload/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:c}=p,m="/api/receipts/upload/route";function g(){return(0,n.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:l})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,972],()=>t(5665));module.exports=a})();