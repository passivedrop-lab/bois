"use strict";(()=>{var e={};e.id=8541,e.ids=[8541],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},21366:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{POST:()=>l});var i=r(49303),o=r(88716),n=r(60670),a=r(87070),p=r(19692);let u=process.env.SUPABASE_PRODUCT_BUCKET||"product-images";async function l(e){try{let t=(await e.json()).ids||[];if(!t||!Array.isArray(t)||0===t.length)return a.NextResponse.json({error:"ids requis"},{status:400});let r=await (0,p.e)(),{data:s,error:i}=await r.from("products").select("id, image_path").in("id",t);if(i)return a.NextResponse.json({error:"Erreur lecture produits"},{status:500});let o=(s||[]).map(e=>e.image_path).filter(Boolean);try{o.length>0&&await r.storage.from(u).remove(o)}catch(e){console.warn("Erreur suppression fichiers storage (ignoring):",e)}let{error:n}=await r.from("products").delete().in("id",t);if(n)return a.NextResponse.json({error:"Erreur suppression"},{status:500});return a.NextResponse.json({success:!0,deleted:t.length,message:`${t.length} produits supprim\xe9s`})}catch(e){return console.error("POST /api/admin/products/delete-multiple error:",e),a.NextResponse.json({error:"Erreur serveur"},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/products/delete-multiple/route",pathname:"/api/admin/products/delete-multiple",filename:"route",bundlePath:"app/api/admin/products/delete-multiple/route"},resolvedPagePath:"/home/deo/Desktop/bois/app/api/admin/products/delete-multiple/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=c,h="/api/admin/products/delete-multiple/route";function x(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},19692:(e,t,r)=>{r.d(t,{e:()=>o});var s=r(67721),i=r(71615);async function o(){let e=await (0,i.cookies)();return(0,s.createServerClient)("https://yiygigafhnlwzdsbzdsj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpeWdpZ2FmaG5sd3pkc2J6ZHNqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDYwMjgsImV4cCI6MjA4MzI4MjAyOH0.-f7tLNsGdofpwwtphm0ouRcIj02Ir2RiDzgyvskPs68",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:s})=>e.set(t,r,s))}catch{}}}})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,7857,9702],()=>r(21366));module.exports=s})();