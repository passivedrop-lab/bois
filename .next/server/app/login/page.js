(()=>{var e={};e.id=2626,e.ids=[2626],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},43973:(e,t,o)=>{"use strict";o.r(t),o.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),o(94687),o(93428),o(35866);var r=o(23191),s=o(88716),i=o(37922),n=o.n(i),a=o(95231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);o.d(t,l);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,94687)),"/home/deo/Desktop/bois/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(o.bind(o,93428)),"/home/deo/Desktop/bois/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(o.t.bind(o,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/deo/Desktop/bois/app/login/page.tsx"],u="/login/page",m={require:o,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},57459:(e,t,o)=>{Promise.resolve().then(o.bind(o,1442))},1442:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a});var r=o(10326),s=o(17577),i=o(5932),n=o(3240);function a(){let[e,t]=(0,s.useState)("email"),[o,a]=(0,s.useState)(""),[l,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[x,f]=(0,s.useState)(!1),[h,g]=(0,s.useState)(""),[b,y]=(0,s.useState)(""),v=async e=>{e.preventDefault(),f(!0),g(""),y("");try{let e=await fetch("/api/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})}),r=await e.json();if(!e.ok){g(r.error||"Erreur lors de l'envoi du code"),f(!1);return}y("Code OTP envoy\xe9 \xe0 votre email!"),t("otp")}catch(e){g("Erreur de connexion")}finally{f(!1)}},w=async e=>{e.preventDefault(),f(!0),g(""),y("");try{let e=await fetch("/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,otp:l})}),r=await e.json();if(!e.ok){r.needsRegistration?(t("register"),g(""),y("Code v\xe9rifi\xe9! Compl\xe9tez votre profil.")):g(r.error||"Code invalide"),f(!1);return}localStorage.setItem("authToken",r.token),localStorage.setItem("userId",r.userId),localStorage.setItem("userEmail",o),window.location.href="/profile/orders"}catch(e){g("Erreur lors de la v\xe9rification")}finally{f(!1)}},j=async e=>{e.preventDefault(),f(!0),g(""),y("");try{let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,otp:l,fullName:c,phone:m})}),t=await e.json();if(!e.ok){g(t.error||"Erreur lors de l'inscription"),f(!1);return}localStorage.setItem("authToken",t.token),localStorage.setItem("userId",t.userId),localStorage.setItem("userEmail",o),window.location.href="/profile/orders"}catch(e){g("Erreur lors de l'inscription")}finally{f(!1)}},N=()=>{t("email"),d(""),g(""),y("")};return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-wood-50 to-white py-12 sm:py-16 md:py-20",children:r.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-xl p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx(i.Z,{className:"w-12 h-12 mx-auto text-fire-600 mb-4"}),(0,r.jsxs)("h1",{className:"text-2xl font-bold text-wood-900",children:["email"===e&&"Connexion / Inscription","otp"===e&&"V\xe9rification du code","register"===e&&"Compl\xe9tez votre profil"]}),(0,r.jsxs)("p",{className:"text-wood-600 mt-2 text-sm",children:["email"===e&&"Entrez votre email pour continuer","otp"===e&&"Entrez le code re\xe7u par email","register"===e&&"Compl\xe9tez vos informations personnelles"]})]}),h&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:h}),b&&r.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:b}),"email"===e&&(0,r.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-wood-900 mb-2",children:"Email *"}),r.jsx("input",{type:"email",placeholder:"votre@email.com",value:o,onChange:e=>a(e.target.value),required:!0,className:"w-full px-4 py-3 border border-wood-200 rounded-lg focus:outline-none focus:border-fire-600 focus:ring-2 focus:ring-fire-100"})]}),(0,r.jsxs)("button",{type:"submit",disabled:x,className:"w-full bg-fire-600 text-white py-3 rounded-lg hover:bg-fire-700 transition font-semibold flex items-center justify-center gap-2 disabled:opacity-50",children:[x&&r.jsx(n.Z,{className:"w-4 h-4 animate-spin"}),"Envoyer un code"]})]}),"otp"===e&&(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-wood-600 mb-4",children:["Un code \xe0 6 chiffres a \xe9t\xe9 envoy\xe9 \xe0 ",r.jsx("strong",{children:o})]}),r.jsx("label",{className:"block text-sm font-medium text-wood-900 mb-2",children:"Code de v\xe9rification *"}),r.jsx("input",{type:"text",placeholder:"000000",value:l,onChange:e=>d(e.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,required:!0,className:"w-full px-4 py-3 border border-wood-200 rounded-lg focus:outline-none focus:border-fire-600 focus:ring-2 focus:ring-fire-100 text-center text-2xl tracking-widest"})]}),(0,r.jsxs)("button",{type:"submit",disabled:x||6!==l.length,className:"w-full bg-fire-600 text-white py-3 rounded-lg hover:bg-fire-700 transition font-semibold flex items-center justify-center gap-2 disabled:opacity-50",children:[x&&r.jsx(n.Z,{className:"w-4 h-4 animate-spin"}),"V\xe9rifier le code"]}),r.jsx("button",{type:"button",onClick:N,className:"w-full border border-wood-300 text-wood-700 py-2 rounded-lg hover:bg-wood-50 transition font-medium",children:"← Retour"}),(0,r.jsxs)("p",{className:"text-center text-xs text-wood-500",children:["Pas re\xe7u de code? ",r.jsx("button",{className:"text-fire-600 hover:text-fire-700 font-semibold",children:"Renvoyer"})]})]}),"register"===e&&(0,r.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-wood-900 mb-2",children:"Nom complet *"}),r.jsx("input",{type:"text",placeholder:"Jean Dupont",value:c,onChange:e=>u(e.target.value),required:!0,className:"w-full px-4 py-3 border border-wood-200 rounded-lg focus:outline-none focus:border-fire-600 focus:ring-2 focus:ring-fire-100"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-wood-900 mb-2",children:"T\xe9l\xe9phone"}),r.jsx("input",{type:"tel",placeholder:"+33 6 12 34 56 78",value:m,onChange:e=>p(e.target.value),className:"w-full px-4 py-3 border border-wood-200 rounded-lg focus:outline-none focus:border-fire-600 focus:ring-2 focus:ring-fire-100"})]}),(0,r.jsxs)("button",{type:"submit",disabled:x,className:"w-full bg-fire-600 text-white py-3 rounded-lg hover:bg-fire-700 transition font-semibold flex items-center justify-center gap-2 disabled:opacity-50",children:[x&&r.jsx(n.Z,{className:"w-4 h-4 animate-spin"}),"Cr\xe9er mon compte"]}),r.jsx("button",{type:"button",onClick:N,className:"w-full border border-wood-300 text-wood-700 py-2 rounded-lg hover:bg-wood-50 transition font-medium",children:"← Retour"})]})]})})})}},3240:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});let r=(0,o(76557).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},5932:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});let r=(0,o(76557).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},94687:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});let r=(0,o(68570).createProxy)(String.raw`/home/deo/Desktop/bois/app/login/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[9276,9797,9888],()=>o(43973));module.exports=r})();