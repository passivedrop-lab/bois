(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{2793:function(e,t,s){Promise.resolve().then(s.bind(s,618))},618:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var l=s(7437),r=s(2265),n=s(9376),o=s(7648),a=s(6275),d=s(4794),i=s(9763);let c=(0,i.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),u=(0,i.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var x=s(7692),h=s(2489),m=s(6840),p=s(3053);function f(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(!1),[i,f]=(0,r.useState)(""),[g,b]=(0,r.useState)(!1),[j,y]=(0,r.useState)(!0),[v,w]=(0,r.useState)({pendingOrders:0,totalProducts:0,totalOrders:0,totalRevenue:0});(0,r.useEffect)(()=>{localStorage.getItem("adminToken")?(s(!0),N()):e.push("/admin/login")},[e]);let N=async()=>{try{let e="https://yiygigafhnlwzdsbzdsj.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlpeWdpZ2FmaG5sd3pkc2J6ZHNqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3MDYwMjgsImV4cCI6MjA4MzI4MjAyOH0.-f7tLNsGdofpwwtphm0ouRcIj02Ir2RiDzgyvskPs68";if(!e||!t){w({pendingOrders:3,totalProducts:24,totalOrders:142,totalRevenue:45680}),y(!1);return}let s=(0,p.eI)(e,t),[l,r]=await Promise.all([s.from("orders").select("id, total, status"),s.from("products").select("id")]),n=l.data||[],o=r.data||[],a=n.filter(e=>"pending"===e.status).length,d=n.reduce((e,t)=>e+(t.total||0),0);w({pendingOrders:a,totalProducts:o.length,totalOrders:n.length,totalRevenue:d})}catch(e){console.error("Erreur chargement stats:",e)}finally{y(!1)}};if(j)return(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Загрузка..."});if(!t)return null;let k=[{label:"Заказы в ожидании",value:v.pendingOrders.toString(),icon:a.Z,color:"text-yellow-600",bgColor:"bg-yellow-50"},{label:"Товары",value:v.totalProducts.toString(),icon:d.Z,color:"text-blue-600",bgColor:"bg-blue-50"},{label:"Всего заказов",value:v.totalOrders.toString(),icon:c,color:"text-green-600",bgColor:"bg-green-50"},{label:"Общий доход",value:"".concat((v.totalRevenue/1e3).toFixed(1),"k₽"),icon:u,color:"text-purple-600",bgColor:"bg-purple-50"}];return(0,l.jsxs)("div",{className:"flex h-screen bg-wood-100",children:[(0,l.jsxs)("div",{className:"".concat(g?"translate-x-0":"-translate-x-full"," fixed md:relative md:translate-x-0 z-40 w-64 h-full bg-wood-900 text-white transition-transform duration-300 flex flex-col"),children:[(0,l.jsxs)("div",{className:"p-6 border-b border-wood-800",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"TsarstvoDereva"}),(0,l.jsx)("p",{className:"text-wood-400 text-sm",children:"Панель администратора"})]}),(0,l.jsxs)("nav",{className:"flex-1 p-6 space-y-2",children:[(0,l.jsxs)(o.default,{href:"/admin",className:"flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-wood-800 transition",children:[(0,l.jsx)(c,{size:20}),"Панель управления"]}),(0,l.jsxs)(o.default,{href:"/admin/products",className:"flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-wood-800 transition",children:[(0,l.jsx)(d.Z,{size:20}),"Товары"]}),(0,l.jsxs)(o.default,{href:"/admin/orders",className:"flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-wood-800 transition",children:[(0,l.jsx)(a.Z,{size:20}),"Заказы"]})]}),(0,l.jsx)("div",{className:"p-6 border-t border-wood-800",children:(0,l.jsxs)("button",{onClick:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminCode"),e.push("/admin/login")},className:"w-full flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-red-600 transition text-white",children:[(0,l.jsx)(x.Z,{size:20}),"Выход"]})})]}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-white border-b border-wood-200 px-4 sm:px-6 py-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:()=>b(!g),className:"md:hidden p-2 hover:bg-wood-100 rounded-lg",children:g?(0,l.jsx)(h.Z,{size:24}):(0,l.jsx)(m.Z,{size:24})}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-wood-900",children:"Панель управления"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("p",{className:"text-sm text-wood-600",children:"Администратор подключен"}),(0,l.jsx)("p",{className:"font-semibold text-wood-900",children:"\uD83D\uDD10 Защищенная панель управления"})]})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto p-4 sm:p-6",children:[(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:k.map((e,t)=>{let s=e.icon;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-wood-600 text-sm font-medium",children:e.label}),(0,l.jsx)("p",{className:"text-3xl font-bold text-wood-900 mt-2",children:e.value})]}),(0,l.jsx)("div",{className:"".concat(e.bgColor," p-3 rounded-lg"),children:(0,l.jsx)(s,{size:24,className:e.color})})]})},t)})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-wood-900 mb-4",children:"Быстрые действия"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(o.default,{href:"/admin/products/new",className:"block w-full bg-fire-600 text-white py-2 px-4 rounded-lg hover:bg-fire-700 transition text-center font-semibold",children:"+ Добавить товар"}),(0,l.jsxs)(o.default,{href:"/admin/orders",className:"block w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition text-center font-semibold",children:["Управление заказами (",v.pendingOrders,")"]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-wood-900 mb-4",children:"Сводка"}),(0,l.jsxs)("div",{className:"space-y-3 text-sm text-wood-700",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"В ожидании:"})," ",(0,l.jsxs)("span",{className:"text-yellow-600 font-bold",children:[v.pendingOrders," заказов"]})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Товары:"})," ",(0,l.jsx)("span",{className:"text-blue-600 font-bold",children:v.totalProducts})]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Выручка:"})," ",(0,l.jsxs)("span",{className:"text-purple-600 font-bold",children:[v.totalRevenue.toLocaleString(),"₽"]})]})]})]})]})]})]})]})}},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},6840:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},4794:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},6275:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9763).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,s){"use strict";var l=s(5475);s.o(l,"usePathname")&&s.d(t,{usePathname:function(){return l.usePathname}}),s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})}},function(e){e.O(0,[451,53,971,117,744],function(){return e(e.s=2793)}),_N_E=e.O()}]);